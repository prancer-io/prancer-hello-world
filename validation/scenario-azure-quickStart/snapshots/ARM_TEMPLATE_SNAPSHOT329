{
  "structure": "filesystem",
  "error": null,
  "reference": "master",
  "contentType": "json",
  "source": "gitConnectorAzureQuickStart",
  "paths": [
    "/application-workloads/netapp/netapp-ontap-sql/azuredeploy.json",
    "/application-workloads/netapp/netapp-ontap-sql/azuredeploy.parameters.json"
  ],
  "timestamp": 1642962892478,
  "queryuser": null,
  "checksum": "99914b932bd37a50b983c5e7c90ae93b",
  "node": {
    "masterSnapshotId": "ARM_TEMPLATE_SNAPSHOT",
    "type": "arm",
    "collection": "armtemplate",
    "paths": [
      "/application-workloads/netapp/netapp-ontap-sql/azuredeploy.json",
      "/application-workloads/netapp/netapp-ontap-sql/azuredeploy.parameters.json"
    ],
    "snapshotId": "ARM_TEMPLATE_SNAPSHOT329",
    "status": "active",
    "validate": true,
    "resourceTypes": [
      "microsoft.resources/deployments"
    ]
  },
  "snapshotId": "ARM_TEMPLATE_SNAPSHOT329",
  "collection": "armtemplate",
  "json": {
    "contentVersion": "1.0.0.0",
    "parameters": {
      "adminUsername": {
        "type": "string",
        "defaultValue": "netappadmin",
        "metadata": {
          "description": "User name used for all VM's OS login"
        },
        "value": "GEN-UNIQUE"
      },
      "adminEmailAddress": {
        "type": "string",
        "metadata": {
          "description": "Enter Admin Email Address, used for NetApp OnCommand Manager GUI Login"
        },
        "value": "test@testemail.com"
      },
      "adminPassword": {
        "type": "securestring",
        "minLength": 12,
        "metadata": {
          "description": "Password used for VM Login(Both Jump-VM & SQL-VM) and  OnCommand Manager Portal Login.SVM Password is generated automatically and exported in output, See Deployment guide for more information.Enter a password that is between 12 and 50 characters in length. The password must contain at least one English letter and one number. The password must not contain non-English letters or admin."
        },
        "value": "GEN-PASSWORD"
      },
      "netappOntapCloudLicenseType": {
        "type": "string",
        "defaultValue": "Standard",
        "allowedValues": [
          "Standard",
          "Premium"
        ],
        "metadata": {
          "description": "NetApp ONTAP cloud license."
        }
      },
      "azureADApplicationID": {
        "type": "string",
        "metadata": {
          "description": "Azure AD App ID, Check deployment guide for permissions required"
        },
        "value": "changemechangeme"
      },
      "azureADApplicationSecret": {
        "type": "securestring",
        "minLength": 12,
        "metadata": {
          "description": "AD App Secret."
        },
        "value": "changemechangeme"
      },
      "sqlDataVolumeSize": {
        "type": "int",
        "defaultValue": 500,
        "minValue": 100,
        "maxValue": 2000,
        "metadata": {
          "description": "SQL Data volume size in GB, Min 100, Max 2000"
        }
      },
      "_artifactsLocation": {
        "type": "string",
        "defaultValue": "https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/netapp-ontap-sql",
        "metadata": {
          "description": "Leave default if insure, The base URI where artifacts required by this template are located. When the template is deployed using the accompanying scripts, a private location in the subscription will be used and this value will be automatically generated."
        }
      },
      "_artifactsLocationSasToken": {
        "type": "securestring",
        "metadata": {
          "description": "Leave blank if insure, The sasToken required to access _artifactsLocation.  When the template is deployed using the accompanying scripts, a sasToken will be automatically generated.Leave blank if unsure"
        },
        "defaultValue": ""
      },
      "remoteAllowedCIDR": {
        "type": "string",
        "minLength": 7,
        "defaultValue": "0.0.0.0/0",
        "metadata": {
          "description": "Enter Public IP CIDR to allow for accessing the deployment.Enter in 0.0.0.0/0 format, you can always modify these later in NSG Settings"
        },
        "value": "0.0.0.0/0"
      },
      "location": {
        "type": "string",
        "defaultValue": "[resourceGroup().location]",
        "metadata": {
          "description": "Location for all resources."
        }
      }
    },
    "variables": {
      "webNsgName": "web-nsg",
      "dataNsgName": "data-nsg",
      "virtualNetworkName": "netapp-vnet",
      "vNetId": "Microsoft.Network/virtualNetworks/netapp-vnet",
      "dataSubnetName": "data-subnet",
      "webSubnetName": "web-subnet",
      "addressPrefix": "10.0.0.0/16",
      "webSubnetPrefix": "10.0.1.0/24",
      "dataSubnetPrefix": "10.0.2.0/24",
      "OnCommandCloudManagerpublicIPAddressName": "oncommand-cloudmanager-pip",
      "OnCommandCloudManagerDnsName": "[concat('oncommand',uniqueString(resourceGroup().id))]",
      "OnCommandCloudManagerVmNicName": "oncommand-cloudmanager-nic",
      "OnCommandCloudManagerVmName": "oncommand-cloudmanager",
      "OnCommandCloudManagervmSize": "Standard_D2_v3",
      "jumpVmName": "jump-vm",
      "sqlVMName": "sql-vm",
      "jumpVMNicName": "vm-jump-nic",
      "sqlVMNicName": "vm-sql-nic",
      "sqlVmSize": "Standard_D2_v3",
      "jumpVmSize": "Standard_D2_v3",
      "jumpVMpublicIPAddressName": "jump-vm-pip",
      "jumpVMDnsName": "[concat('jumpvm',uniqueString(resourceGroup().id))]",
      "sharedResourcesTemplateFileName": "shared-resources.json",
      "JumpVMTemplateFileName": "jump-vm.json",
      "netAppOnCommandCloudManagerVMTemplateFileName": "netapp-oncommand-cloudmanager.json",
      "netAppOntapCloudTemplateFileName": "netapp-ontap-cloud.json",
      "sqlCustomScriptTemplateFileName": "sql-netappotc-connect.json",
      "sqlVMTemplateFileName": "sql-vm.json",
      "OTCPassword": "[concat('otc',uniqueString(resourceGroup().id))]",
      "netappOntapCloudLicenseStandard": {
        "type": "object",
        "licenseType": "azure-cot-standard-paygo",
        "instanceType": "Standard_D8s_v3",
        "storageType": "Standard_LRS"
      },
      "netappOntapCloudLicensePremium": {
        "type": "object",
        "licenseType": "azure-cot-premium-paygo",
        "instanceType": "Standard_D16s_v3",
        "storageType": "Premium_LRS"
      },
      "netappOntapVersion": "ONTAP-9.2P1.T1.azure",
      "NetAppTags": {
        "type": "object",
        "provider": "877cfe7c-ae65-427b-a1a4-1d8b0b6fa9d4"
      },
      "quickstartTags": {
        "type": "object",
        "name": "netapp-ontap-cloud-sql-azure"
      }
    },
    "resources": [
      {
        "name": "shared-resources",
        "type": "Microsoft.Resources/deployments",
        "apiVersion": "2016-09-01",
        "comments": "Azure Resources that are shared within the infrastructure environment",
        "properties": {
          "mode": "Incremental",
          "templateLink": {
            "uri": "_artifactslocation/nested/shared-resources.jsonparameters('_artifactsLocationSasToken')",
            "contentVersion": "1.0.0.0"
          },
          "parameters": {
            "webNsgName": {
              "value": "web-nsg"
            },
            "dataNsgName": {
              "value": "data-nsg"
            },
            "virtualNetworkName": {
              "value": "netapp-vnet"
            },
            "dataSubnetName": {
              "value": "data-subnet"
            },
            "webSubnetName": {
              "value": "web-subnet"
            },
            "addressPrefix": {
              "value": "10.0.0.0/16"
            },
            "webSubnetPrefix": {
              "value": "10.0.1.0/24"
            },
            "dataSubnetPrefix": {
              "value": "10.0.2.0/24"
            },
            "remoteAllowedCIDR": {
              "value": "0.0.0.0/0"
            },
            "NetAppTags": {
              "value": {
                "type": "object",
                "provider": "877cfe7c-ae65-427b-a1a4-1d8b0b6fa9d4"
              }
            },
            "quickstartTags": {
              "value": {
                "type": "object",
                "name": "netapp-ontap-cloud-sql-azure"
              }
            }
          }
        }
      },
      {
        "name": "jump-vm",
        "type": "Microsoft.Resources/deployments",
        "apiVersion": "2016-09-01",
        "comments": "Jump Server deployment",
        "dependsOn": [
          "Microsoft.Resources/deployments/shared-resources"
        ],
        "properties": {
          "mode": "Incremental",
          "templateLink": {
            "uri": "_artifactslocation/nested/jump-vm.jsonparameters('_artifactsLocationSasToken')",
            "contentVersion": "1.0.0.0"
          },
          "parameters": {
            "adminUsername": {
              "value": "GEN-UNIQUE"
            },
            "adminPassword": {
              "value": "GEN-PASSWORD"
            },
            "vNetId": {
              "value": "Microsoft.Network/virtualNetworks/netapp-vnet"
            },
            "webSubnetName": {
              "value": "web-subnet"
            },
            "jumpVmName": {
              "value": "JumpVmName"
            },
            "jumpVmSize": {
              "value": "Standard_D2_v3"
            },
            "jumpvmNicName": {
              "value": "jumpvmNicName"
            },
            "jumpvmPublicIPAddressName": {
              "value": "jumpvmPublicIPAddressName"
            },
            "jumpvmDnsName": {
              "value": "jumpvmDnsName"
            },
            "NetAppTags": {
              "value": {
                "type": "object",
                "provider": "877cfe7c-ae65-427b-a1a4-1d8b0b6fa9d4"
              }
            },
            "quickstartTags": {
              "value": {
                "type": "object",
                "name": "netapp-ontap-cloud-sql-azure"
              }
            }
          }
        }
      },
      {
        "name": "sql-vm",
        "type": "Microsoft.Resources/deployments",
        "apiVersion": "2016-09-01",
        "comments": "SQL Server Deployment",
        "dependsOn": [
          "Microsoft.Resources/deployments/shared-resources"
        ],
        "properties": {
          "mode": "Incremental",
          "templateLink": {
            "uri": "_artifactslocation/nested/sql-vm.jsonparameters('_artifactsLocationSasToken')",
            "contentVersion": "1.0.0.0"
          },
          "parameters": {
            "adminUsername": {
              "value": "GEN-UNIQUE"
            },
            "adminPassword": {
              "value": "GEN-PASSWORD"
            },
            "vNetId": {
              "value": "Microsoft.Network/virtualNetworks/netapp-vnet"
            },
            "dataSubnetName": {
              "value": "data-subnet"
            },
            "sqlVmName": {
              "value": "sqlVmName"
            },
            "sqlVmNicName": {
              "value": "sqlVmNicName"
            },
            "sqlVmSize": {
              "value": "Standard_D2_v3"
            },
            "_artifactsLocation": {
              "value": "https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/netapp-ontap-sql"
            },
            "_artifactsLocationSasToken": {
              "value": ""
            },
            "NetAppTags": {
              "value": {
                "type": "object",
                "provider": "877cfe7c-ae65-427b-a1a4-1d8b0b6fa9d4"
              }
            },
            "quickstartTags": {
              "value": {
                "type": "object",
                "name": "netapp-ontap-cloud-sql-azure"
              }
            }
          }
        }
      },
      {
        "name": "netapp-oncommand-cloudmanager",
        "type": "Microsoft.Resources/deployments",
        "apiVersion": "2016-09-01",
        "comments": "NetApp OnCommand Manager Deployment",
        "dependsOn": [
          "Microsoft.Resources/deployments/shared-resources"
        ],
        "properties": {
          "mode": "Incremental",
          "templateLink": {
            "uri": "_artifactslocation/nested/netapp-oncommand-cloudmanager.jsonparameters('_artifactsLocationSasToken')",
            "contentVersion": "1.0.0.0"
          },
          "parameters": {
            "adminUsername": {
              "value": "GEN-UNIQUE"
            },
            "adminPassword": {
              "value": "GEN-PASSWORD"
            },
            "vNetId": {
              "value": "Microsoft.Network/virtualNetworks/netapp-vnet"
            },
            "webSubnetName": {
              "value": "web-subnet"
            },
            "OnCommandCloudManagerVmName": {
              "value": "oncommand-cloudmanager"
            },
            "OnCommandCloudManagervmSize": {
              "value": "Standard_D2_v3"
            },
            "OnCommandCloudManagerVmNicName": {
              "value": "oncommand-cloudmanager-nic"
            },
            "OnCommandCloudManagerpublicIPAddressName": {
              "value": "oncommand-cloudmanager-pip"
            },
            "OnCommandCloudManagerDnsName": {
              "value": "[variables('OnCommandCloudManagerDnsName')]"
            },
            "NetAppTags": {
              "value": {
                "type": "object",
                "provider": "877cfe7c-ae65-427b-a1a4-1d8b0b6fa9d4"
              }
            },
            "quickstartTags": {
              "value": {
                "type": "object",
                "name": "netapp-ontap-cloud-sql-azure"
              }
            }
          }
        }
      },
      {
        "name": "netapp-ontap-cloud",
        "type": "Microsoft.Resources/deployments",
        "apiVersion": "2016-09-01",
        "comments": "NetApp ONTAP Cloud Env Deployment",
        "dependsOn": [
          "Microsoft.Resources/deployments/netapp-oncommand-cloudmanager"
        ],
        "properties": {
          "mode": "Incremental",
          "templateLink": {
            "uri": "_artifactslocation/nested/netapp-ontap-cloud.jsonparameters('_artifactsLocationSasToken')",
            "contentVersion": "1.0.0.0"
          },
          "parameters": {
            "adminEmailAddress": {
              "value": "test@testemail.com"
            },
            "adminPassword": {
              "value": "GEN-PASSWORD"
            },
            "OTCPassword": {
              "value": "[variables('OTCPassword')]"
            },
            "dataNsgName": {
              "value": "data-nsg"
            },
            "vNetId": {
              "value": "Microsoft.Network/virtualNetworks/netapp-vnet"
            },
            "cidr": {
              "value": "AddressPrefix"
            },
            "dataSubnetName": {
              "value": "data-subnet"
            },
            "OnCommandCloudManagerVmName": {
              "value": "oncommand-cloudmanager"
            },
            "azureADApplicationID": {
              "value": "changemechangeme"
            },
            "azureADApplicationSecret": {
              "value": "changemechangeme"
            },
            "netappOntapCloudLicense": {
              "value": "concat(netappOntapCloudLicense,parameters(netappOntapCloudLicenseType))"
            },
            "netappOntapVersion": {
              "value": "ONTAP-9.2P1.T1.azure"
            },
            "_artifactsLocation": {
              "value": "https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/netapp-ontap-sql"
            },
            "_artifactsLocationSasToken": {
              "value": ""
            },
            "NetAppTags": {
              "value": {
                "type": "object",
                "provider": "877cfe7c-ae65-427b-a1a4-1d8b0b6fa9d4"
              }
            },
            "quickstartTags": {
              "value": {
                "type": "object",
                "name": "netapp-ontap-cloud-sql-azure"
              }
            }
          }
        }
      },
      {
        "name": "sql-netappotc-connect",
        "type": "Microsoft.Resources/deployments",
        "apiVersion": "2016-09-01",
        "comments": "Configure SQL Volume Extension",
        "dependsOn": [
          "Microsoft.Resources/deployments/netapp-ontap-cloud"
        ],
        "properties": {
          "mode": "Incremental",
          "templateLink": {
            "uri": "_artifactslocation/nested/sql-netappotc-connect.jsonparameters('_artifactsLocationSasToken')",
            "contentVersion": "1.0.0.0"
          },
          "parameters": {
            "adminEmailAddress": {
              "value": "test@testemail.com"
            },
            "adminPassword": {
              "value": "GEN-PASSWORD"
            },
            "OTCPassword": {
              "value": "[variables('OTCPassword')]"
            },
            "_artifactsLocation": {
              "value": "https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/netapp-ontap-sql"
            },
            "_artifactsLocationSasToken": {
              "value": ""
            },
            "sqlVmName": {
              "value": "sqlVmName"
            },
            "sqlDataVolumeSize": {
              "value": 500
            },
            "otcIp": {
              "value": "[reference('netapp-oncommand-cloudmanager').outputs.NetAppOnCommandCloudManagerPublicIP.value]"
            },
            "NetAppTags": {
              "value": {
                "type": "object",
                "provider": "877cfe7c-ae65-427b-a1a4-1d8b0b6fa9d4"
              }
            },
            "quickstartTags": {
              "value": {
                "type": "object",
                "name": "netapp-ontap-cloud-sql-azure"
              }
            }
          }
        }
      }
    ],
    "outputs": {
      "NetApp ONTAP Cloud Manager URL:": {
        "type": "string",
        "value": "[reference('netapp-oncommand-cloudmanager').outputs.NetAppOnCommandCloudManagerURL.value]"
      },
      "Jump VM FQDN": {
        "type": "string",
        "value": "[reference('jump-vm').outputs.jumpVmDNSLabel.value]"
      },
      "NetApp OTC SVM Password": {
        "type": "string",
        "value": "[variables('OTCPassword')]"
      }
    },
    "\uff04schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#"
  }
}