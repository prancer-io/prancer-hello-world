{
  "structure": "filesystem",
  "error": null,
  "reference": "master",
  "contentType": "json",
  "source": "gitConnectorAzureQuickStart",
  "paths": [
    "/quickstarts/microsoft.datalakestore/yash-datalake/nested/azureFunction.json"
  ],
  "timestamp": 1642962905954,
  "queryuser": null,
  "checksum": "99914b932bd37a50b983c5e7c90ae93b",
  "node": {
    "masterSnapshotId": "ARM_TEMPLATE_SNAPSHOT",
    "type": "arm",
    "collection": "armtemplate",
    "paths": [
      "/quickstarts/microsoft.datalakestore/yash-datalake/nested/azureFunction.json"
    ],
    "snapshotId": "ARM_TEMPLATE_SNAPSHOT1247",
    "status": "active",
    "validate": true,
    "resourceTypes": [
      "microsoft.web/sites",
      "microsoft.web/sites/config",
      "microsoft.web/serverfarms"
    ]
  },
  "snapshotId": "ARM_TEMPLATE_SNAPSHOT1247",
  "collection": "armtemplate",
  "json": {
    "contentVersion": "1.0.0.0",
    "parameters": {
      "location": {
        "type": "string",
        "metadata": {
          "description": "Deployment location"
        }
      },
      "KibanaESDeployedVMIP": {
        "type": "string",
        "metadata": {
          "description": "Public IP of VM on which kibana install."
        }
      },
      "web_app_id": {
        "type": "string",
        "metadata": {
          "description": "The ID of the service principal web/api"
        }
      },
      "web_app_secret": {
        "type": "securestring",
        "metadata": {
          "description": "The ID of the service principal web/api"
        }
      },
      "appName": {
        "type": "string",
        "metadata": {
          "description": "Web application name"
        }
      },
      "datafactory_name": {
        "type": "string",
        "metadata": {
          "description": "The ID of the service principal"
        }
      },
      "storageAccountName": {
        "type": "string",
        "metadata": {
          "description": "storage account name"
        }
      },
      "eventhub_name": {
        "type": "string",
        "metadata": {
          "description": "Event hub name"
        }
      },
      "eventhub_namespace": {
        "type": "string",
        "metadata": {
          "description": "eventhub namespace name"
        }
      },
      "adla_account_name": {
        "type": "string",
        "metadata": {
          "description": "Azure datalake analytics name"
        }
      },
      "DataCleaningStreamAnalyticsJob": {
        "type": "String",
        "metadata": {
          "description": " Azure stream analytics job name 1"
        }
      },
      "DataAggregatorStreamAnalyticsJob1": {
        "type": "String",
        "metadata": {
          "description": " Azure stream analytics job name 1"
        }
      },
      "DataAggregatorStreamAnalyticsJob2": {
        "type": "String",
        "metadata": {
          "description": " Azure stream analytics job name 2"
        }
      },
      "DataAggregatorStreamAnalyticsJob3": {
        "type": "String",
        "metadata": {
          "description": " Azure stream analytics job name 3"
        }
      },
      "_artifactsLocation": {
        "type": "string",
        "metadata": {
          "description": "The base URI where artifacts required by this template are located including a trailing '/'"
        }
      },
      "_artifactsLocationSasToken": {
        "type": "SecureString",
        "metadata": {
          "description": "The base URI where artifacts required by this template are located including a trailing '/'"
        }
      }
    },
    "variables": {
      "config_web_name": "web",
      "pythonExtension": "azureappservice-python2714x64",
      "functionAppName": "appName",
      "hostingPlanName": "appName",
      "tenant": "[subscription().tenantId]",
      "msd": "MSDeploy"
    },
    "resources": [
      {
        "type": "Microsoft.Web/serverfarms",
        "name": "appName",
        "apiVersion": "2020-06-01",
        "sku": {
          "name": "Y1",
          "tier": "Dynamic",
          "size": "Y1",
          "family": "Y",
          "capacity": 0
        },
        "kind": "functionapp",
        "location": "location",
        "properties": {
          "name": "appName",
          "perSiteScaling": false,
          "reserved": false,
          "targetWorkerCount": 0,
          "targetWorkerSizeId": 0
        }
      },
      {
        "type": "Microsoft.Web/sites",
        "name": "appName",
        "apiVersion": "2020-06-01",
        "dependsOn": [
          "Microsoft.Web/serverfarms/appName"
        ],
        "kind": "functionapp",
        "location": "location",
        "resources": [
          {
            "name": "azureappservice-python2714x64",
            "type": "siteextensions",
            "apiVersion": "2020-06-01",
            "properties": {},
            "dependsOn": [
              "Microsoft.Web/sites/appName"
            ]
          },
          {
            "name": "MSDeploy",
            "type": "extensions",
            "location": "location",
            "apiVersion": "2020-06-01",
            "dependsOn": [
              "Microsoft.Web/sites//appName",
              "Microsoft.Web/serverfarms/appName",
              "Microsoft.Web/sites/siteextensions/appName/azureappservice-python2714x64"
            ],
            "tags": {
              "displayName": "pythonextension"
            },
            "properties": {
              "packageUri": "[uri(parameters('_artifactsLocation'), concat('scripts/quickstart_function_app.zip', parameters('_artifactsLocationSasToken')))]",
              "dbType": "None"
            }
          }
        ],
        "properties": {
          "enabled": true,
          "serverFarmId": "Microsoft.Web/serverfarms/appName",
          "siteConfig": {
            "handlerMappings": [
              {
                "arguments": "D:\\home\\Python27\\wfastcgi.py",
                "extension": "fastCgi",
                "scriptProcessor": "D:\\home\\Python27\\python.exe"
              }
            ],
            "appSettings": [
              {
                "name": "AzureWebJobsStorage",
                "value": "[Concat('DefaultEndpointsProtocol=https;AccountName=',parameters('storageAccountName'),';AccountKey=',listKeys(resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName')),'2021-01-01').keys[0].value)]"
              },
              {
                "name": "datafactory_name",
                "value": "datafactory_name"
              },
              {
                "name": "vm_ip",
                "value": "KibanaESDeployedVMIP"
              },
              {
                "name": "function_app_name",
                "value": "appName"
              },
              {
                "name": "resource_group",
                "value": "[resourceGroup().name]"
              },
              {
                "name": "storage_name",
                "value": "storageAccountName"
              },
              {
                "name": "subscription_id",
                "value": "[subscription().subscriptionId]"
              },
              {
                "name": "tenant",
                "value": "[subscription().tenantId]"
              },
              {
                "name": "web_app_id",
                "value": "web_app_id"
              },
              {
                "name": "web_app_secret",
                "value": "web_app_secret"
              },
              {
                "name": "adla_account_name",
                "value": "adla_account_name"
              },
              {
                "name": "eventhub_name",
                "value": "eventhub_name"
              },
              {
                "name": "eventhub_namespace",
                "value": "eventhub_namespace"
              },
              {
                "name": "sas_key",
                "value": "[listkeys(resourceId('Microsoft.EventHub/namespaces/authorizationRules', parameters('eventhub_namespace'), 'RootManageSharedAccessKey'), '2021-01-01-preview').primaryKey]"
              },
              {
                "name": "DataCleaningStreamAnalyticsJob",
                "value": "DataCleaningStreamAnalyticsJob"
              },
              {
                "name": "DataAggregatorStreamAnalyticsJob1",
                "value": "DataAggregatorStreamAnalyticsJob1"
              },
              {
                "name": "DataAggregatorStreamAnalyticsJob2",
                "value": "DataAggregatorStreamAnalyticsJob2"
              },
              {
                "name": "DataAggregatorStreamAnalyticsJob3",
                "value": "DataAggregatorStreamAnalyticsJob3"
              }
            ]
          },
          "reserved": false,
          "scmSiteAlsoStopped": false,
          "clientAffinityEnabled": false,
          "clientCertEnabled": false,
          "hostNamesDisabled": false,
          "containerSize": 1536,
          "dailyMemoryTimeQuota": 0
        }
      },
      {
        "type": "Microsoft.Web/sites/config",
        "name": "appName/web",
        "apiVersion": "2018-11-01",
        "dependsOn": [
          "Microsoft.Web/sites/appName",
          "Microsoft.Web/serverfarms/appName",
          "Microsoft.Web/sites/extensions/appName/MSDeploy"
        ],
        "properties": {
          "numberOfWorkers": 1,
          "defaultDocuments": [
            "Default.htm",
            "Default.html",
            "Default.asp",
            "index.htm",
            "index.html",
            "iisstart.htm",
            "default.aspx",
            "index.php"
          ],
          "netFrameworkVersion": "v4.0",
          "phpVersion": "5.6",
          "pythonVersion": "2.7",
          "requestTracingEnabled": false,
          "remoteDebuggingEnabled": false,
          "httpLoggingEnabled": false,
          "logsDirectorySizeLimit": 35,
          "detailedErrorLoggingEnabled": false,
          "publishingUsername": "$appName",
          "scmType": "None",
          "use32BitWorkerProcess": true,
          "webSocketsEnabled": false,
          "alwaysOn": false,
          "managedPipelineMode": "Integrated",
          "virtualApplications": [
            {
              "virtualPath": "/",
              "physicalPath": "site\\wwwroot",
              "preloadEnabled": false
            }
          ],
          "winAuthAdminState": 0,
          "winAuthTenantState": 0,
          "customAppPoolIdentityAdminState": false,
          "customAppPoolIdentityTenantState": false,
          "loadBalancing": "LeastRequests",
          "autoHealEnabled": false,
          "siteAuthEnabled": true,
          "siteAuthSettings": {
            "enabled": true,
            "unauthenticatedClientAction": "RedirectToLoginPage",
            "tokenStoreEnabled": true,
            "defaultProvider": "AzureActiveDirectory",
            "clientId": "web_app_id",
            "issuer": "https://sts.windows.net/[subscription().tenantId]",
            "isAadAutoProvisioned": false
          },
          "localMySqlEnabled": false,
          "http20Enabled": false,
          "minTlsVersion": "1.0",
          "ftpsState": "AllAllowed"
        },
        "location": "location"
      }
    ],
    "outputs": {
      "websiteUrl": {
        "type": "string",
        "value": "[reference(resourceId('Microsoft.Web/Sites', parameters('appName'))).hostNames[0]]"
      }
    },
    "\uff04schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#"
  }
}