{
  "structure": "filesystem",
  "error": null,
  "reference": "master",
  "contentType": "json",
  "source": "gitConnectorAzureQuickStart",
  "paths": [
    "/quickstarts/microsoft.apimanagement/api-management-logs-to-moesif-using-eventhub-webapp/nested/microsoft.web/sites.json"
  ],
  "timestamp": 1642962902865,
  "queryuser": null,
  "checksum": "99914b932bd37a50b983c5e7c90ae93b",
  "node": {
    "masterSnapshotId": "ARM_TEMPLATE_SNAPSHOT",
    "type": "arm",
    "collection": "armtemplate",
    "paths": [
      "/quickstarts/microsoft.apimanagement/api-management-logs-to-moesif-using-eventhub-webapp/nested/microsoft.web/sites.json"
    ],
    "snapshotId": "ARM_TEMPLATE_SNAPSHOT933",
    "status": "active",
    "validate": true,
    "resourceTypes": [
      "microsoft.web/sites/config",
      "microsoft.web/sites",
      "microsoft.web/sites/hostnamebindings"
    ]
  },
  "snapshotId": "ARM_TEMPLATE_SNAPSHOT933",
  "collection": "armtemplate",
  "json": {
    "contentVersion": "1.0.0.0",
    "parameters": {
      "appServiceName": {
        "type": "string",
        "metadata": {
          "description": "The name to be given to this new App Service. This value is used in DNS and must be unique."
        }
      },
      "appServicePlanName": {
        "type": "string",
        "metadata": {
          "description": "The name of an existing App Service plan for which the App Service will be created"
        }
      },
      "eventHubNamespace": {
        "type": "string",
        "metadata": {
          "description": "sets environment variable APIMEVENTS-EVENTHUB-NAME"
        }
      },
      "eventHubName": {
        "type": "string",
        "metadata": {
          "description": "Sets environment variable APIMEVENTS-EVENTHUB-NAME"
        }
      },
      "eventHubListenPolicy": {
        "type": "string",
        "metadata": {
          "description": "Name of Event Hubs Namespace listen policy. Found in EventHubNamespace/Settings/Shared access policies: eg 'moesiflogaaaaaa-listen-policy'"
        }
      },
      "apimEvtStorName": {
        "type": "string",
        "metadata": {
          "description": "Sets environment variable APIMEVENTS-STORAGEACCOUNT-NAME"
        }
      },
      "apimEvtMoesifApplicationId": {
        "type": "string",
        "metadata": {
          "description": "Sets environment variable APIMEVENTS-MOESIF-APPLICATION-ID"
        }
      },
      "apimEvtMoesifSessionToken": {
        "type": "string",
        "defaultValue": "optional",
        "metadata": {
          "description": "Sets environment variable APIMEVENTS-MOESIF-SESSION-TOKEN"
        }
      },
      "apimEvtMoesifApiVersion": {
        "type": "string",
        "defaultValue": "v1",
        "metadata": {
          "description": "Sets environment variable APIMEVENTS-MOESIF-API-VERSION"
        }
      },
      "azureWebsitesDomain": {
        "type": "string",
        "metadata": {
          "description": "DNS name to use for azure webapp such as .azurewebsites.net"
        }
      },
      "tags": {
        "type": "Object",
        "defaultValue": {}
      },
      "location": {
        "type": "string",
        "metadata": {
          "description": "Location for all resources. eg 'westus2'"
        }
      }
    },
    "variables": {
      "appServiceHostName": "appServiceNameazureWebsitesDomain"
    },
    "resources": [
      {
        "type": "Microsoft.Web/sites",
        "apiVersion": "2020-12-01",
        "name": "appServiceName",
        "location": "location",
        "tags": {},
        "kind": "app",
        "properties": {
          "enabled": true,
          "hostNameSslStates": [
            {
              "name": "appServiceNameazureWebsitesDomain",
              "sslState": "Disabled",
              "hostType": "Standard"
            },
            {
              "name": "appServiceName.scmazureWebsitesDomain",
              "sslState": "Disabled",
              "hostType": "Repository"
            }
          ],
          "serverFarmId": "Microsoft.Web/serverfarms/appServicePlanName",
          "reserved": false,
          "isXenon": false,
          "hyperV": false,
          "siteConfig": {
            "appSettings": [
              {
                "name": "APIMEVENTS-EVENTHUB-CONNECTIONSTRING",
                "value": "[listKeys(resourceId('Microsoft.EventHub/namespaces/authorizationRules', parameters('eventHubNamespace'), parameters('eventHubListenPolicy')), '2021-01-01-preview').primaryConnectionString]"
              },
              {
                "name": "APIMEVENTS-EVENTHUB-NAME",
                "value": "eventHubName"
              },
              {
                "name": "APIMEVENTS-STORAGEACCOUNT-NAME",
                "value": "apimEvtStorName"
              },
              {
                "name": "APIMEVENTS-STORAGEACCOUNT-KEY",
                "value": "[listKeys(resourceId('Microsoft.Storage/storageAccounts', parameters('apimEvtStorName')), '2021-02-01').keys[0].value]"
              },
              {
                "name": "APIMEVENTS-MOESIF-APPLICATION-ID",
                "value": "apimEvtMoesifApplicationId"
              },
              {
                "name": "APIMEVENTS-MOESIF-SESSION-TOKEN",
                "value": "optional"
              },
              {
                "name": "APIMEVENTS-MOESIF-API-VERSION",
                "value": "v1"
              }
            ]
          },
          "scmSiteAlsoStopped": false,
          "clientAffinityEnabled": true,
          "clientCertEnabled": false,
          "hostNamesDisabled": false,
          "containerSize": 0,
          "dailyMemoryTimeQuota": 0,
          "httpsOnly": false,
          "redundancyMode": "None"
        }
      },
      {
        "type": "Microsoft.Web/sites/config",
        "apiVersion": "2020-12-01",
        "name": "appServiceName/web",
        "location": "location",
        "tags": {},
        "dependsOn": [
          "Microsoft.Web/sites/appServiceName",
          "Microsoft.Web/sites/hostNameBindings/appServiceName/appServiceNameazureWebsitesDomain"
        ],
        "properties": {
          "netFrameworkVersion": "v5.0",
          "logsDirectorySizeLimit": 60,
          "numberOfWorkers": 1,
          "alwaysOn": "true",
          "defaultDocuments": [
            "Default.htm",
            "Default.html",
            "Default.asp",
            "index.htm",
            "index.html",
            "iisstart.htm",
            "default.aspx",
            "index.php",
            "hostingstart.html"
          ]
        }
      },
      {
        "type": "Microsoft.Web/sites/hostNameBindings",
        "apiVersion": "2020-12-01",
        "name": "appServiceName/appServiceNameazureWebsitesDomain",
        "location": "location",
        "tags": {},
        "dependsOn": [
          "Microsoft.Web/sites/appServiceName"
        ],
        "properties": {
          "siteName": "appServiceName",
          "hostNameType": "Verified"
        }
      }
    ],
    "outputs": {
      "appServiceName": {
        "type": "string",
        "value": "[parameters('appServiceName')]"
      },
      "appServiceHostName": {
        "type": "string",
        "value": "[variables('appServiceHostName')]"
      }
    },
    "\uff04schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#"
  }
}