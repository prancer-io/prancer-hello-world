{
  "structure": "filesystem",
  "error": null,
  "reference": "master",
  "contentType": "json",
  "source": "gitConnectorAzureQuickStart",
  "paths": [
    "/quickstarts/microsoft.network/front-door-standard-premium-container-instances-public/azuredeploy.json",
    "/quickstarts/microsoft.network/front-door-standard-premium-container-instances-public/azuredeploy.parameters.json"
  ],
  "timestamp": 1642962909035,
  "queryuser": null,
  "checksum": "99914b932bd37a50b983c5e7c90ae93b",
  "node": {
    "masterSnapshotId": "ARM_TEMPLATE_SNAPSHOT",
    "type": "arm",
    "collection": "armtemplate",
    "paths": [
      "/quickstarts/microsoft.network/front-door-standard-premium-container-instances-public/azuredeploy.json",
      "/quickstarts/microsoft.network/front-door-standard-premium-container-instances-public/azuredeploy.parameters.json"
    ],
    "snapshotId": "ARM_TEMPLATE_SNAPSHOT1548",
    "status": "active",
    "validate": true,
    "resourceTypes": [
      "microsoft.cdn/profiles/origingroups/origins",
      "microsoft.cdn/profiles/afdendpoints",
      "microsoft.cdn/profiles",
      "microsoft.cdn/profiles/afdendpoints/routes",
      "microsoft.cdn/profiles/origingroups",
      "microsoft.containerinstance/containergroups"
    ]
  },
  "snapshotId": "ARM_TEMPLATE_SNAPSHOT1548",
  "collection": "armtemplate",
  "json": {
    "contentVersion": "1.0.0.0",
    "metadata": {
      "_generator": {
        "name": "bicep",
        "version": "0.4.451.19169",
        "templateHash": "13826511842460355977"
      }
    },
    "parameters": {
      "location": {
        "type": "string",
        "defaultValue": "[resourceGroup().location]",
        "metadata": {
          "description": "The location into which regionally scoped resources should be deployed. Note that Front Door is a global resource."
        }
      },
      "frontDoorEndpointName": {
        "type": "string",
        "defaultValue": "[format('afd-{0}', uniqueString(resourceGroup().id))]",
        "metadata": {
          "description": "The name of the Front Door endpoint to create. This must be globally unique."
        }
      },
      "frontDoorSkuName": {
        "type": "string",
        "defaultValue": "Standard_AzureFrontDoor",
        "allowedValues": [
          "Standard_AzureFrontDoor",
          "Premium_AzureFrontDoor"
        ],
        "metadata": {
          "description": "The name of the SKU to use when creating the Front Door profile."
        }
      },
      "containerGroupDnsNameLabel": {
        "type": "string",
        "defaultValue": "[format('aci-{0}', uniqueString(resourceGroup().id))]",
        "metadata": {
          "description": "The DNS name for the container group."
        }
      }
    },
    "functions": [],
    "variables": {
      "frontDoorProfileName": "MyFrontDoor",
      "frontDoorOriginGroupName": "MyOriginGroup",
      "frontDoorOriginName": "MyAppServiceOrigin",
      "frontDoorRouteName": "MyRoute",
      "containerGroupName": "HelloWorld",
      "containerName": "helloworld",
      "containerImageUri": "mcr.microsoft.com/azuredocs/aci-helloworld:latest"
    },
    "resources": [
      {
        "type": "Microsoft.ContainerInstance/containerGroups",
        "apiVersion": "2021-03-01",
        "name": "HelloWorld",
        "location": "[resourceGroup().location]",
        "properties": {
          "containers": [
            {
              "name": "helloworld",
              "properties": {
                "image": "mcr.microsoft.com/azuredocs/aci-helloworld:latest",
                "ports": [
                  {
                    "port": 80
                  }
                ],
                "resources": {
                  "requests": {
                    "cpu": 1,
                    "memoryInGB": 4
                  }
                }
              }
            }
          ],
          "restartPolicy": "OnFailure",
          "osType": "Linux",
          "ipAddress": {
            "type": "Public",
            "dnsNameLabel": "[format('aci-{0}', uniqueString(resourceGroup().id))]",
            "ports": [
              {
                "protocol": "TCP",
                "port": 80
              }
            ]
          }
        }
      },
      {
        "type": "Microsoft.Cdn/profiles",
        "apiVersion": "2020-09-01",
        "name": "MyFrontDoor",
        "location": "global",
        "sku": {
          "name": "Standard_AzureFrontDoor"
        }
      },
      {
        "type": "Microsoft.Cdn/profiles/afdEndpoints",
        "apiVersion": "2020-09-01",
        "name": "[format('{0}/{1}', variables('frontDoorProfileName'), parameters('frontDoorEndpointName'))]",
        "location": "global",
        "properties": {
          "originResponseTimeoutSeconds": 240,
          "enabledState": "Enabled"
        },
        "dependsOn": [
          "Microsoft.Cdn/profiles/MyFrontDoor"
        ]
      },
      {
        "type": "Microsoft.Cdn/profiles/originGroups",
        "apiVersion": "2020-09-01",
        "name": "[format('{0}/{1}', variables('frontDoorProfileName'), variables('frontDoorOriginGroupName'))]",
        "properties": {
          "loadBalancingSettings": {
            "sampleSize": 4,
            "successfulSamplesRequired": 3
          },
          "healthProbeSettings": {
            "probePath": "/",
            "probeRequestType": "HEAD",
            "probeProtocol": "Http",
            "probeIntervalInSeconds": 100
          }
        },
        "dependsOn": [
          "Microsoft.Cdn/profiles/MyFrontDoor"
        ]
      },
      {
        "type": "Microsoft.Cdn/profiles/originGroups/origins",
        "apiVersion": "2020-09-01",
        "name": "[format('{0}/{1}/{2}', variables('frontDoorProfileName'), variables('frontDoorOriginGroupName'), variables('frontDoorOriginName'))]",
        "properties": {
          "hostName": "[reference(resourceId('Microsoft.ContainerInstance/containerGroups', variables('containerGroupName'))).ipAddress.fqdn]",
          "httpPort": 80,
          "httpsPort": 443,
          "originHostHeader": "[reference(resourceId('Microsoft.ContainerInstance/containerGroups', variables('containerGroupName'))).ipAddress.fqdn]",
          "priority": 1,
          "weight": 1000
        },
        "dependsOn": [
          "Microsoft.ContainerInstance/containerGroups/HelloWorld",
          "Microsoft.Cdn/profiles/originGroups/MyFrontDoor/MyOriginGroup",
          "Microsoft.Cdn/profiles/MyFrontDoor"
        ]
      },
      {
        "type": "Microsoft.Cdn/profiles/afdEndpoints/routes",
        "apiVersion": "2020-09-01",
        "name": "[format('{0}/{1}/{2}', variables('frontDoorProfileName'), parameters('frontDoorEndpointName'), variables('frontDoorRouteName'))]",
        "properties": {
          "originGroup": {
            "id": "Microsoft.Cdn/profiles/originGroups/MyFrontDoor/MyOriginGroup"
          },
          "supportedProtocols": [
            "Http",
            "Https"
          ],
          "patternsToMatch": [
            "/*"
          ],
          "compressionSettings": {
            "contentTypesToCompress": [
              "application/eot",
              "application/font",
              "application/font-sfnt",
              "application/javascript",
              "application/json",
              "application/opentype",
              "application/otf",
              "application/pkcs7-mime",
              "application/truetype",
              "application/ttf",
              "application/vnd.ms-fontobject",
              "application/xhtml+xml",
              "application/xml",
              "application/xml+rss",
              "application/x-font-opentype",
              "application/x-font-truetype",
              "application/x-font-ttf",
              "application/x-httpd-cgi",
              "application/x-javascript",
              "application/x-mpegurl",
              "application/x-opentype",
              "application/x-otf",
              "application/x-perl",
              "application/x-ttf",
              "font/eot",
              "font/ttf",
              "font/otf",
              "font/opentype",
              "image/svg+xml",
              "text/css",
              "text/csv",
              "text/html",
              "text/javascript",
              "text/js",
              "text/plain",
              "text/richtext",
              "text/tab-separated-values",
              "text/xml",
              "text/x-script",
              "text/x-component",
              "text/x-java-source"
            ],
            "isCompressionEnabled": true
          },
          "queryStringCachingBehavior": "IgnoreQueryString",
          "forwardingProtocol": "HttpOnly",
          "linkToDefaultDomain": "Enabled",
          "httpsRedirect": "Enabled"
        },
        "dependsOn": [
          "Microsoft.Cdn/profiles/afdEndpoints/MyFrontDoor/[format('afd-{0}', uniqueString(resourceGroup().id))]",
          "Microsoft.Cdn/profiles/originGroups/origins/MyFrontDoor/MyOriginGroup/MyAppServiceOrigin",
          "Microsoft.Cdn/profiles/originGroups/MyFrontDoor/MyOriginGroup",
          "Microsoft.Cdn/profiles/MyFrontDoor"
        ]
      }
    ],
    "outputs": {
      "frontDoorEndpointHostName": {
        "type": "string",
        "value": "[reference(resourceId('Microsoft.Cdn/profiles/afdEndpoints', variables('frontDoorProfileName'), parameters('frontDoorEndpointName'))).hostName]"
      },
      "containerGroupFqdn": {
        "type": "string",
        "value": "[reference(resourceId('Microsoft.ContainerInstance/containerGroups', variables('containerGroupName'))).ipAddress.fqdn]"
      }
    },
    "\uff04schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#"
  }
}