{
  "structure": "filesystem",
  "error": null,
  "reference": "master",
  "contentType": "json",
  "source": "gitConnectorAzureQuickStart",
  "paths": [
    "/demos/oms-kemp-applicationdelivery-solution/azuredeploy.json",
    "/demos/oms-kemp-applicationdelivery-solution/azuredeploy.parameters.json"
  ],
  "timestamp": 1642962901002,
  "queryuser": null,
  "checksum": "99914b932bd37a50b983c5e7c90ae93b",
  "node": {
    "masterSnapshotId": "ARM_TEMPLATE_SNAPSHOT",
    "type": "arm",
    "collection": "armtemplate",
    "paths": [
      "/demos/oms-kemp-applicationdelivery-solution/azuredeploy.json",
      "/demos/oms-kemp-applicationdelivery-solution/azuredeploy.parameters.json"
    ],
    "snapshotId": "ARM_TEMPLATE_SNAPSHOT776",
    "status": "active",
    "validate": true,
    "resourceTypes": [
      "microsoft.operationalinsights/workspaces/savedsearches/schedules",
      "microsoft.operationalinsights/workspaces/views",
      "microsoft.operationalinsights/workspaces/savedsearches/schedules/actions",
      "microsoft.operationalinsights/workspaces",
      "microsoft.operationalinsights/workspaces/savedsearches",
      "microsoft.operationsmanagement/solutions"
    ]
  },
  "snapshotId": "ARM_TEMPLATE_SNAPSHOT776",
  "collection": "armtemplate",
  "json": {
    "contentVersion": "1.0.0.0",
    "parameters": {
      "omsLogAnalyticsWorkspaceName": {
        "type": "string",
        "defaultValue": "",
        "metadata": {
          "description": "Create new or refer to an existing OMS Log Analytics Workspace"
        },
        "value": "GEN-UNIQUE-20"
      },
      "omsLogAnalyticsRegion": {
        "type": "string",
        "defaultValue": "",
        "allowedValues": [
          "westeurope",
          "eastus",
          "southeastasia",
          "australiasoutheast"
        ],
        "metadata": {
          "description": "Specify the Azure Region for your new or existing OMS workspace"
        },
        "value": "eastus"
      },
      "omsLogAnalyticsSku": {
        "type": "string",
        "defaultValue": "free",
        "allowedValues": [
          "free",
          "standalone",
          "pernode"
        ],
        "metadata": {
          "description": "Specify the Azure Region for your OMS Automation Account"
        },
        "value": "standalone"
      }
    },
    "variables": {
      "omsSolutions": {
        "customSolution": {
          "viewName": "KempApplicationDelivery",
          "solutionName": "[concat('KempApplicationDelivery', '[', parameters('omsLogAnalyticsWorkspaceName'), ']')]",
          "publisher": "QND",
          "displayName": "Kemp Application Delivery",
          "description": "Monitor and analyze your Kemp Application Delivery devices",
          "author": "daniele.grandini@live.it",
          "version": "1",
          "product": "KempApplicationDelivery"
        }
      },
      "querytemplateuri": "https//rawcontent.github.com",
      "savedSearchesCategory": "Kemp Application Delivery by QND",
      "alertArray": [
        {
          "alertName": "KEMP - Device license is about to expire",
          "description": "The license for the device is about to expire, renew the license or your device will stop working",
          "severity": "Critical",
          "enabled": true,
          "searchName": "Alert - Device License Expiring",
          "searchCategory": "Kemp Application Delivery by QND",
          "query": "Type:KempDevice_CL LicensedUntil_t < NOW+2MONTH | dedup Computer",
          "alertTresholdValue": 0,
          "operator": "gt",
          "alertThrottleInMinutes": 0,
          "scheduleIntervalInMinutes": 60,
          "scheduleQueryTimeSpan": 60,
          "scheduleType": "Normal",
          "scheduleTypeSpecified": true,
          "nearRealTime": false,
          "version": 1
        }
      ],
      "alertMetricArray": [
        {
          "alertName": "KEMP - Virtual Server (VS) not operational",
          "description": "The VS status is not Up this means the service provided by this VS is not available",
          "severity": "Critical",
          "enabled": true,
          "searchName": "Alert - Virtual Server (VS) not operational",
          "searchCategory": "Kemp Application Delivery by QND",
          "query": "Type:KempStatus_CL (servertype_s=vs OR servertype_s=subvs) enabled_s=Y AND (status_s != Up AND status_s != Redirect) | measure count() by Computer, name_s interval 10minutes",
          "alertTresholdValue": 0,
          "operator": "gt",
          "alertThrottleInMinutes": 0,
          "scheduleIntervalInMinutes": 5,
          "scheduleQueryTimeSpan": 15,
          "triggerCondition": "Total",
          "triggerOperator": "gt",
          "triggerValue": 0,
          "scheduleType": "Normal",
          "scheduleTypeSpecified": true,
          "nearRealTime": false,
          "version": 1
        },
        {
          "alertName": "KEMP - TPS approaching the device capacity",
          "description": "The current load in TPS is approaching the device limit. Take action to avoid service disruption",
          "severity": "Critical",
          "enabled": false,
          "searchName": "Alert - TPS approaching device limit",
          "searchCategory": "Kemp Application Delivery by QND",
          "query": "Type:Perf ObjectName=KempLM-TPS CounterName=\"Total TPS\" | measure max(CounterValue) by Computer interval 15MINUTE",
          "alertTresholdValue": 0,
          "operator": "gt",
          "alertThrottleInMinutes": 0,
          "scheduleIntervalInMinutes": 15,
          "scheduleQueryTimeSpan": 60,
          "triggerCondition": "Total",
          "triggerOperator": "gt",
          "triggerValue": 190,
          "scheduleType": "Normal",
          "scheduleTypeSpecified": true,
          "nearRealTime": false,
          "version": 1
        }
      ]
    },
    "resources": [
      {
        "name": "omslogAnalyticsWorkspaceName",
        "type": "Microsoft.OperationalInsights/workspaces",
        "apiVersion": "2015-11-01-preview",
        "location": "eastus",
        "properties": {
          "sku": {
            "name": "standalone"
          }
        }
      },
      {
        "apiVersion": "2015-11-01-preview",
        "name": "GEN-UNIQUE-20/(omsSolutions).customSolution.viewName",
        "type": "Microsoft.OperationalInsights/workspaces/views",
        "location": "eastus",
        "id": "Microsoft.OperationalInsights/workspaces/views//GEN-UNIQUE-20/(omsSolutions).customSolution.viewName",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20"
        ],
        "properties": {
          "Id": "Kemp LoadMaster",
          "Name": "Kemp LoadMaster",
          "Author": "daniele.grandini@live.it",
          "Source": "Local",
          "Dashboard": [
            {
              "Id": "InformationBlade",
              "Type": "Blade",
              "Version": 0,
              "Configuration": {
                "General": {
                  "Title": "",
                  "NewGroup": false,
                  "Color": "#0072c6"
                },
                "Header": {
                  "Image": "",
                  "Label": "Kemp Application Delivery monitoring",
                  "Link": {
                    "Label": "More info",
                    "Url": "https://github.com/QuaeNocentDocent/omskemp"
                  }
                },
                "List": [
                  {
                    "Title": "The solution needs to be configured",
                    "Content": "The data sets processed by the QND Kemp Application Delivery solution need to be collected from a Linux machine. To do this on a supported Linux platform install the [OMS agent](https://github.com/Microsoft/OMS-Agent-for-Linux)\n\nAfter the agent is configured and running, install the Kemp extension and configure your Kemp devices following these [steps](https://github.com/QuaeNocentDocent/omskemp/tree/master)\n\n![Kemp Logo](https://raw.githubusercontent.com/QuaeNocentDocent/omskemp/master/docs/pictures/KEMP-logov2.png)"
                  }
                ]
              }
            },
            {
              "Id": "SingleQueryDonutBuilderBladeV1",
              "Type": "Blade",
              "Version": 0,
              "Configuration": {
                "General": {
                  "title": "Connected Devices",
                  "newGroup": false,
                  "icon": "",
                  "useIcon": false
                },
                "Header": {
                  "Title": "Devices by model",
                  "Subtitle": ""
                },
                "Donut": {
                  "Query": "Type:KempDevice_CL | measure countdistinct(Computer) by ApplianceModel_s",
                  "CenterLegend": {
                    "Text": "Total",
                    "Operation": "Sum",
                    "ArcsToSelect": []
                  },
                  "Options": {
                    "colors": [
                      "#00188f",
                      "#0072c6",
                      "#00bcf2"
                    ],
                    "valueColorMapping": []
                  }
                },
                "List": {
                  "Query": "Type:KempDevice_CL | measure countdistinct(Computer) by Computer,ApplianceModel_s",
                  "HideGraph": true,
                  "enableSparklines": false,
                  "operation": "Summary",
                  "ColumnsTitle": {
                    "Name": "Computer",
                    "Value": "Count"
                  },
                  "Color": "#0072c6",
                  "thresholds": {
                    "isEnabled": false,
                    "values": [
                      {
                        "name": "Normal",
                        "threshold": "Default",
                        "color": "#009e49",
                        "isDefault": true
                      },
                      {
                        "name": "Warning",
                        "threshold": "60",
                        "color": "#fcd116",
                        "isDefault": false
                      },
                      {
                        "name": "Error",
                        "threshold": "90",
                        "color": "#ba141a",
                        "isDefault": false
                      }
                    ]
                  },
                  "NameDSVSeparator": "",
                  "NavigationQuery": "{selected item} Type:KempDevice_CL"
                }
              }
            },
            {
              "Id": "SingleQueryDonutBuilderBladeV1",
              "Type": "Blade",
              "Version": 0,
              "Configuration": {
                "General": {
                  "title": "",
                  "newGroup": false,
                  "icon": "",
                  "useIcon": false
                },
                "Header": {
                  "Title": "Devices by version",
                  "Subtitle": ""
                },
                "Donut": {
                  "Query": "Type:KempDevice_CL | measure countdistinct(Computer) by version_s",
                  "CenterLegend": {
                    "Text": "Total",
                    "Operation": "Sum",
                    "ArcsToSelect": []
                  },
                  "Options": {
                    "colors": [
                      "#00188f",
                      "#0072c6",
                      "#00bcf2"
                    ],
                    "valueColorMapping": []
                  }
                },
                "List": {
                  "Query": "Type:KempDevice_CL | measure countdistinct(Computer) by Computer, version_s",
                  "HideGraph": false,
                  "enableSparklines": false,
                  "operation": "Summary",
                  "ColumnsTitle": {
                    "Name": "Computer",
                    "Value": "Count"
                  },
                  "Color": "#0072c6",
                  "thresholds": {
                    "isEnabled": false,
                    "values": [
                      {
                        "name": "Normal",
                        "threshold": "Default",
                        "color": "#009e49",
                        "isDefault": true
                      },
                      {
                        "name": "Warning",
                        "threshold": "60",
                        "color": "#fcd116",
                        "isDefault": false
                      },
                      {
                        "name": "Error",
                        "threshold": "90",
                        "color": "#ba141a",
                        "isDefault": false
                      }
                    ]
                  },
                  "NameDSVSeparator": "",
                  "NavigationQuery": "{selected item} Type:KempDevice_CL"
                }
              }
            },
            {
              "Id": "NumberTileListBuilderBlade",
              "Type": "Blade",
              "Version": 0,
              "Configuration": {
                "General": {
                  "title": "",
                  "newGroup": false,
                  "icon": "",
                  "useIcon": false
                },
                "Tile": {
                  "Query": "Type:KempDevice_CL | measure count() by Computer",
                  "Legend": "Devices by license expiration"
                },
                "List": {
                  "Query": "Type:KempDevice_CL | measure max(LicensedUntil_t) As Expiration by Computer, LicensedUntil_t | sort Expiration",
                  "HideGraph": true,
                  "enableSparklines": false,
                  "operation": "Summary",
                  "ColumnsTitle": {
                    "Name": "Device",
                    "Value": ""
                  },
                  "Color": "#0072c6",
                  "thresholds": {
                    "isEnabled": false,
                    "values": [
                      {
                        "name": "Normal",
                        "threshold": "Default",
                        "color": "#009e49",
                        "isDefault": true
                      },
                      {
                        "name": "Warning",
                        "threshold": "60",
                        "color": "#fcd116",
                        "isDefault": false
                      },
                      {
                        "name": "Error",
                        "threshold": "90",
                        "color": "#ba141a",
                        "isDefault": false
                      }
                    ]
                  },
                  "NameDSVSeparator": "",
                  "NavigationQuery": "{selected item} Type:KempDevice_CL"
                }
              }
            },
            {
              "Id": "LineChartBuilderBlade",
              "Type": "Blade",
              "Version": 0,
              "Configuration": {
                "General": {
                  "title": "Device usage",
                  "newGroup": true,
                  "icon": "",
                  "useIcon": false
                },
                "Header": {
                  "Title": "TPS Usage over time",
                  "Subtitle": ""
                },
                "LineChart": {
                  "Query": "Type:Perf (ObjectName=\"KempLM-TPS\") CounterName=\"Total TPS\" | measure max(CounterValue) by Computer | display linechart",
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": ""
                  }
                },
                "List": {
                  "Query": "Type:Perf (ObjectName=\"KempLM-TPS\") CounterName=\"Total TPS\" | measure percentile99(CounterValue) by Computer",
                  "HideGraph": false,
                  "enableSparklines": true,
                  "operation": "Summary",
                  "ColumnsTitle": {
                    "Name": "Device",
                    "Value": "TPS"
                  },
                  "Color": "#0072c6",
                  "thresholds": {
                    "isEnabled": false,
                    "values": [
                      {
                        "name": "Normal",
                        "threshold": "Default",
                        "color": "#009e49",
                        "isDefault": true
                      },
                      {
                        "name": "Warning",
                        "threshold": "150",
                        "color": "#fcd116",
                        "isDefault": false
                      },
                      {
                        "name": "Error",
                        "threshold": "190",
                        "color": "#ba141a",
                        "isDefault": false
                      }
                    ]
                  },
                  "NameDSVSeparator": "",
                  "NavigationQuery": "{selected item} Type:Perf (ObjectName=\"KempLM-TPS\") CounterName=\"Total TPS\""
                }
              }
            },
            {
              "Id": "LineChartBuilderBlade",
              "Type": "Blade",
              "Version": 0,
              "Configuration": {
                "General": {
                  "title": "",
                  "newGroup": false,
                  "icon": "",
                  "useIcon": false
                },
                "Header": {
                  "Title": "CPU Usage over time",
                  "Subtitle": ""
                },
                "LineChart": {
                  "Query": "Type:Perf (ObjectName=\"KempLM-Processor\") (CounterName=\"% Total Time\") | measure percentile95(CounterValue) by Computer interval 15MINUTES | display linechart",
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": ""
                  }
                },
                "List": {
                  "Query": "Type:Perf (ObjectName=\"KempLM-Processor\") (CounterName=\"% Total Time\") | measure percentile95(CounterValue) by Computer interval 15MINUTES",
                  "HideGraph": false,
                  "enableSparklines": true,
                  "operation": "Summary",
                  "ColumnsTitle": {
                    "Name": "Device",
                    "Value": "% CPU"
                  },
                  "Color": "#0072c6",
                  "thresholds": {
                    "isEnabled": true,
                    "values": [
                      {
                        "name": "Normal",
                        "threshold": "Default",
                        "color": "#009e49",
                        "isDefault": true
                      },
                      {
                        "name": "Warning",
                        "threshold": "60",
                        "color": "#fcd116",
                        "isDefault": false
                      },
                      {
                        "name": "Error",
                        "threshold": "90",
                        "color": "#ba141a",
                        "isDefault": false
                      }
                    ]
                  },
                  "NameDSVSeparator": "",
                  "NavigationQuery": "{selected item} Type:Perf (ObjectName=\"KempLM-Processor\") (CounterName=\"% Total Time\") | measure percentile95(CounterValue) by Computer interval 15MINUTES | display linechart"
                }
              }
            },
            {
              "Id": "LineChartBuilderBlade",
              "Type": "Blade",
              "Version": 0,
              "Configuration": {
                "General": {
                  "title": "",
                  "newGroup": false,
                  "icon": "",
                  "useIcon": false
                },
                "Header": {
                  "Title": "Memory used over time",
                  "Subtitle": ""
                },
                "LineChart": {
                  "Query": "Type:Perf (ObjectName=\"KempLM-Memory\") CounterName=\"% Used\" | measure percentile99(CounterValue) by Computer | display linechart",
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": ""
                  }
                },
                "List": {
                  "Query": "Type:Perf (ObjectName=\"KempLM-Memory\") CounterName=\"% Used\" | measure percentile99(CounterValue) As MemoryUsed by Computer | sort MemoryUsed desc",
                  "HideGraph": false,
                  "enableSparklines": true,
                  "operation": "Summary",
                  "ColumnsTitle": {
                    "Name": "Device",
                    "Value": "% Used"
                  },
                  "Color": "#0072c6",
                  "thresholds": {
                    "isEnabled": true,
                    "values": [
                      {
                        "name": "Normal",
                        "threshold": "Default",
                        "color": "#009e49",
                        "isDefault": true
                      },
                      {
                        "name": "Warning",
                        "threshold": "70",
                        "color": "#fcd116",
                        "isDefault": false
                      },
                      {
                        "name": "Error",
                        "threshold": "90",
                        "color": "#ba141a",
                        "isDefault": false
                      }
                    ]
                  },
                  "NameDSVSeparator": "",
                  "NavigationQuery": "{selected item} Type:Perf (ObjectName=\"KempLM-Memory\") CounterName=\"% Used\" | measure percentile99(CounterValue) As MemoryUsed by Computer | sort MemoryUsed desc"
                }
              }
            },
            {
              "Id": "LineChartBuilderBlade",
              "Type": "Blade",
              "Version": 0,
              "Configuration": {
                "General": {
                  "title": "VS Status",
                  "newGroup": true,
                  "icon": "",
                  "useIcon": false
                },
                "Header": {
                  "Title": "Active connections per VS",
                  "Subtitle": ""
                },
                "LineChart": {
                  "Query": "Type:Perf ObjectName=KempLM-VS (CounterName=\"Active Connections\") | measure percentile99(CounterValue) by InstanceName",
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": ""
                  }
                },
                "List": {
                  "Query": "Type:Perf ObjectName=KempLM-VS (CounterName=\"Active Connections\") | measure percentile99(CounterValue) by InstanceName",
                  "HideGraph": false,
                  "enableSparklines": true,
                  "operation": "Summary",
                  "ColumnsTitle": {
                    "Name": "VS",
                    "Value": "Active Connections"
                  },
                  "Color": "#0072c6",
                  "thresholds": {
                    "isEnabled": false,
                    "values": [
                      {
                        "name": "Normal",
                        "threshold": "Default",
                        "color": "#009e49",
                        "isDefault": true
                      },
                      {
                        "name": "Warning",
                        "threshold": "60",
                        "color": "#fcd116",
                        "isDefault": false
                      },
                      {
                        "name": "Error",
                        "threshold": "90",
                        "color": "#ba141a",
                        "isDefault": false
                      }
                    ]
                  },
                  "NameDSVSeparator": "",
                  "NavigationQuery": "{selected item} Type:Perf ObjectName=KempLM-VS (CounterName=\"Active Connections\") | measure max(CounterValue) by InstanceName interval 10MINUTES"
                }
              }
            },
            {
              "Id": "SingleQueryDonutBuilderBladeV1",
              "Type": "Blade",
              "Version": 0,
              "Configuration": {
                "General": {
                  "title": "",
                  "newGroup": false,
                  "icon": "",
                  "useIcon": false
                },
                "Header": {
                  "Title": "VS Status",
                  "Subtitle": ""
                },
                "Donut": {
                  "Query": "Type:KempStatus_CL (servertype_s=vs OR servertype_s=subvs) enabled_s=\"Y\"  TimeGenerated > NOW-8MINUTES | dedup name_s | measure count() by status_s",
                  "CenterLegend": {
                    "Text": "Total",
                    "Operation": "Sum",
                    "ArcsToSelect": []
                  },
                  "Options": {
                    "colors": [
                      "#00188f",
                      "#0072c6",
                      "#00bcf2"
                    ],
                    "valueColorMapping": []
                  }
                },
                "List": {
                  "Query": "Type:KempStatus_CL (servertype_s=vs OR servertype_s=subvs) enabled_s=\"Y\"  status_s!=\"Up\"  status_s!='Redirect' | select name_s, status_s | dedup name_s",
                  "HideGraph": false,
                  "enableSparklines": false,
                  "ColumnsTitle": {
                    "Name": "VS not Up",
                    "Value": ""
                  },
                  "Color": "#0072c6",
                  "operation": "Summary",
                  "thresholds": {
                    "isEnabled": true,
                    "values": [
                      {
                        "name": "Normal",
                        "threshold": "Default",
                        "color": "#ba141a",
                        "isDefault": true
                      },
                      {
                        "name": "Warning",
                        "threshold": "60",
                        "color": "#fcd116",
                        "isDefault": false
                      },
                      {
                        "name": "Error",
                        "threshold": "90",
                        "color": "#ba141a",
                        "isDefault": false
                      }
                    ]
                  },
                  "NameDSVSeparator": "",
                  "NavigationQuery": "{selected item} Type:KempStatus_CL (servertype_s=vs OR servertype_s=subvs) enabled_s=\"Y\""
                }
              }
            }
          ],
          "OverviewTile": {
            "Id": "DoubleNumberBuilderTile",
            "Type": "OverviewTile",
            "Version": 0,
            "Configuration": {
              "TileOne": {
                "Legend": "Kemp Devices",
                "Query": "Type:KempDevice_CL | measure countdistinct(Computer) by Computer"
              },
              "TileTwo": {
                "Legend": "Virtual Servers",
                "Query": "Type:KempStatus_CL | measure countdistinct(name_s) by name_s"
              },
              "Advanced": {
                "DataFlowVerification": {
                  "Enabled": true,
                  "Query": "Type:KempDevice_CL",
                  "Message": "The solution needs to be configured for data to be gathered"
                }
              }
            }
          }
        }
      },
      {
        "type": "Microsoft.OperationsManagement/solutions",
        "name": "(omsSolutions).customSolution.solutionName",
        "apiVersion": "2015-11-01-preview",
        "location": "eastus",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "Microsoft.OperationalInsights/workspaces/views/GEN-UNIQUE-20/(omsSolutions).customSolution.viewName",
          "savedsearchcopy",
          "schedulescopy",
          "savedsearchcopyMetric",
          "schedulescopyMetric",
          "actioncopy",
          "actioncopyMetric"
        ],
        "plan": {
          "name": "(omsSolutions).customSolution.solutionName",
          "publisher": "(omsSolutions).customSolution.publisher",
          "promotionCode": "",
          "product": "(omsSolutions).customSolution.product",
          "Version": "(omsSolutions).customSolution.version"
        },
        "properties": {
          "workspaceResourceId": "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "referencedResources": [],
          "containedResources": [
            "Microsoft.OperationalInsights/workspaces/views//GEN-UNIQUE-20/(omsSolutions).customSolution.viewName"
          ]
        }
      },
      {
        "apiVersion": "2015-11-01-preview",
        "type": "Microsoft.OperationalInsights/workspaces/savedSearches",
        "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertArray')[copyIndex()].searchCategory), '|', toLower(variables('alertArray')[copyIndex()].searchName))]",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "Microsoft.OperationalInsights/workspaces/views/GEN-UNIQUE-20/(omsSolutions).customSolution.viewName"
        ],
        "properties": {
          "etag": "*",
          "query": "(alertArray)[copyIndex()].query",
          "displayName": "(alertArray)[copyIndex()].searchName",
          "category": "(alertArray)[copyIndex()].searchCategory",
          "version": "(alertArray)[copyIndex()].version"
        }
      },
      {
        "apiVersion": "2015-11-01-preview",
        "type": "Microsoft.OperationalInsights/workspaces/savedSearches",
        "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName))]",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "Microsoft.OperationalInsights/workspaces/views/GEN-UNIQUE-20/(omsSolutions).customSolution.viewName"
        ],
        "properties": {
          "etag": "*",
          "query": "(alertMetricArray)[copyIndex()].query",
          "displayName": "(alertMetricArray)[copyIndex()].searchName",
          "category": "(alertMetricArray)[copyIndex()].searchCategory",
          "version": "(alertMetricArray)[copyIndex()].version"
        }
      },
      {
        "apiVersion": "2015-11-01-preview",
        "type": "Microsoft.OperationalInsights/workspaces/savedSearches",
        "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName))]",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "Microsoft.OperationalInsights/workspaces/views/GEN-UNIQUE-20/(omsSolutions).customSolution.viewName"
        ],
        "properties": {
          "etag": "*",
          "query": "(alertMetricArray)[copyIndex()].query",
          "displayName": "(alertMetricArray)[copyIndex()].searchName",
          "category": "(alertMetricArray)[copyIndex()].searchCategory",
          "version": "(alertMetricArray)[copyIndex()].version"
        }
      },
      {
        "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertArray')[copyIndex()].searchCategory), '|', toLower(variables('alertArray')[copyIndex()].searchName), '/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertArray')[copyIndex()].searchCategory, '|', variables('alertArray')[copyIndex()].searchName))]",
        "type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules",
        "apiVersion": "2015-11-01-preview",
        "location": "eastus",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "Microsoft.OperationalInsights/workspaces/views/GEN-UNIQUE-20/(omsSolutions).customSolution.viewName",
          "savedsearchcopy"
        ],
        "properties": {
          "etag": "*",
          "Interval": "(alertArray)[copyIndex()].scheduleIntervalInMinutes",
          "QueryTimeSpan": "(alertArray)[copyIndex()].scheduleQueryTimeSpan",
          "enabled": "(alertArray)[copyIndex()].enabled",
          "NearRealTime": "(alertArray)[copyIndex()].nearRealTime"
        }
      },
      {
        "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName), '/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertMetricArray')[copyIndex()].searchCategory, '|', variables('alertMetricArray')[copyIndex()].searchName))]",
        "type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules",
        "apiVersion": "2015-11-01-preview",
        "location": "eastus",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "Microsoft.OperationalInsights/workspaces/views/GEN-UNIQUE-20/(omsSolutions).customSolution.viewName",
          "savedsearchcopyMetric"
        ],
        "properties": {
          "etag": "*",
          "Interval": "(alertMetricArray)[copyIndex()].scheduleIntervalInMinutes",
          "QueryTimeSpan": "(alertMetricArray)[copyIndex()].scheduleQueryTimeSpan",
          "enabled": "(alertMetricArray)[copyIndex()].enabled",
          "NearRealTime": "(alertMetricArray)[copyIndex()].nearRealTime"
        }
      },
      {
        "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName), '/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertMetricArray')[copyIndex()].searchCategory, '|', variables('alertMetricArray')[copyIndex()].searchName))]",
        "type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules",
        "apiVersion": "2015-11-01-preview",
        "location": "eastus",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "Microsoft.OperationalInsights/workspaces/views/GEN-UNIQUE-20/(omsSolutions).customSolution.viewName",
          "savedsearchcopyMetric"
        ],
        "properties": {
          "etag": "*",
          "Interval": "(alertMetricArray)[copyIndex()].scheduleIntervalInMinutes",
          "QueryTimeSpan": "(alertMetricArray)[copyIndex()].scheduleQueryTimeSpan",
          "enabled": "(alertMetricArray)[copyIndex()].enabled",
          "NearRealTime": "(alertMetricArray)[copyIndex()].nearRealTime"
        }
      },
      {
        "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertArray')[copyIndex()].searchCategory), '|', toLower(variables('alertArray')[copyIndex()].searchName), '/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertArray')[copyIndex()].searchCategory, '|', variables('alertArray')[copyIndex()].searchName), '/', 'alert-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertArray')[copyIndex()].searchCategory, '|', variables('alertArray')[copyIndex()].searchName))]",
        "type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
        "apiVersion": "2015-11-01-preview",
        "location": "eastus",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "Microsoft.OperationalInsights/workspaces/views/GEN-UNIQUE-20/(omsSolutions).customSolution.viewName",
          "savedsearchcopy",
          "schedulescopy"
        ],
        "properties": {
          "etag": "*",
          "Type": "Alert",
          "Name": "(alertArray)[copyIndex()].alertName",
          "Description": "(alertArray)[copyIndex()].description",
          "Severity": "(alertArray)[copyIndex()].severity",
          "Throttling": {
            "DurationInMinutes": "(alertArray)[copyIndex()].alertThrottleInMinutes"
          },
          "Threshold": {
            "Operator": "(alertArray)[copyIndex()].operator",
            "Value": "(alertArray)[copyIndex()].alertTresholdValue"
          },
          "ScheduleType": "(alertArray)[copyIndex()].scheduleType",
          "ScheduleTypeSpecified": "(alertArray)[copyIndex()].scheduleTypeSpecified",
          "Version": "(alertArray)[copyIndex()].version"
        }
      },
      {
        "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName), '/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertMetricArray')[copyIndex()].searchCategory, '|', variables('alertMetricArray')[copyIndex()].searchName), '/', 'alert-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertMetricArray')[copyIndex()].searchCategory, '|', variables('alertMetricArray')[copyIndex()].searchName))]",
        "type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
        "apiVersion": "2015-11-01-preview",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "Microsoft.OperationalInsights/workspaces/views/GEN-UNIQUE-20/(omsSolutions).customSolution.viewName",
          "savedsearchcopyMetric",
          "schedulescopyMetric"
        ],
        "properties": {
          "etag": "*",
          "Type": "Alert",
          "Name": "(alertMetricArray)[copyIndex()].alertName",
          "Description": "(alertMetricArray)[copyIndex()].description",
          "Severity": "(alertMetricArray)[copyIndex()].severity",
          "Throttling": {
            "DurationInMinutes": "(alertMetricArray)[copyIndex()].alertThrottleInMinutes"
          },
          "Threshold": {
            "Operator": "(alertMetricArray)[copyIndex()].operator",
            "Value": "(alertMetricArray)[copyIndex()].alertTresholdValue",
            "MetricsTrigger": {
              "TriggerCondition": "(alertMetricArray)[copyIndex()].triggerCondition",
              "Operator": "(alertMetricArray)[copyIndex()].triggerOperator",
              "Value": "(alertMetricArray)[copyIndex()].triggerValue"
            }
          },
          "ScheduleType": "(alertMetricArray)[copyIndex()].scheduleType",
          "ScheduleTypeSpecified": "(alertMetricArray)[copyIndex()].scheduleTypeSpecified",
          "Version": "(alertMetricArray)[copyIndex()].version"
        }
      },
      {
        "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName), '/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertMetricArray')[copyIndex()].searchCategory, '|', variables('alertMetricArray')[copyIndex()].searchName), '/', 'alert-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertMetricArray')[copyIndex()].searchCategory, '|', variables('alertMetricArray')[copyIndex()].searchName))]",
        "type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
        "apiVersion": "2015-11-01-preview",
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces//GEN-UNIQUE-20",
          "Microsoft.OperationalInsights/workspaces/views/GEN-UNIQUE-20/(omsSolutions).customSolution.viewName",
          "savedsearchcopyMetric",
          "schedulescopyMetric"
        ],
        "properties": {
          "etag": "*",
          "Type": "Alert",
          "Name": "(alertMetricArray)[copyIndex()].alertName",
          "Description": "(alertMetricArray)[copyIndex()].description",
          "Severity": "(alertMetricArray)[copyIndex()].severity",
          "Throttling": {
            "DurationInMinutes": "(alertMetricArray)[copyIndex()].alertThrottleInMinutes"
          },
          "Threshold": {
            "Operator": "(alertMetricArray)[copyIndex()].operator",
            "Value": "(alertMetricArray)[copyIndex()].alertTresholdValue",
            "MetricsTrigger": {
              "TriggerCondition": "(alertMetricArray)[copyIndex()].triggerCondition",
              "Operator": "(alertMetricArray)[copyIndex()].triggerOperator",
              "Value": "(alertMetricArray)[copyIndex()].triggerValue"
            }
          },
          "ScheduleType": "(alertMetricArray)[copyIndex()].scheduleType",
          "ScheduleTypeSpecified": "(alertMetricArray)[copyIndex()].scheduleTypeSpecified",
          "Version": "(alertMetricArray)[copyIndex()].version"
        }
      }
    ],
    "outputs": {},
    "\uff04schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#"
  }
}