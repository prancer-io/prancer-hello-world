{
  "structure": "filesystem",
  "error": null,
  "reference": "master",
  "contentType": "json",
  "source": "gitConnectorAzureQuickStart",
  "paths": [
    "/quickstarts/microsoft.insights/log-analytics-with-solutions-and-diagnostics/azuredeploy.json",
    "/quickstarts/microsoft.insights/log-analytics-with-solutions-and-diagnostics/azuredeploy.parameters.json"
  ],
  "timestamp": 1642962907240,
  "queryuser": null,
  "checksum": "99914b932bd37a50b983c5e7c90ae93b",
  "node": {
    "masterSnapshotId": "ARM_TEMPLATE_SNAPSHOT",
    "type": "arm",
    "collection": "armtemplate",
    "paths": [
      "/quickstarts/microsoft.insights/log-analytics-with-solutions-and-diagnostics/azuredeploy.json",
      "/quickstarts/microsoft.insights/log-analytics-with-solutions-and-diagnostics/azuredeploy.parameters.json"
    ],
    "snapshotId": "ARM_TEMPLATE_SNAPSHOT1372",
    "status": "active",
    "validate": true,
    "resourceTypes": [
      "microsoft.operationalinsights/workspaces",
      "microsoft.operationsmanagement/solutions",
      "microsoft.insights/diagnosticsettings"
    ]
  },
  "snapshotId": "ARM_TEMPLATE_SNAPSHOT1372",
  "collection": "armtemplate",
  "json": {
    "contentVersion": "1.0.0.0",
    "metadata": {
      "_generator": {
        "name": "bicep",
        "version": "0.4.412.5873",
        "templateHash": "8192223282203489077"
      }
    },
    "parameters": {
      "location": {
        "type": "string",
        "defaultValue": "[resourceGroup().location]"
      },
      "logAnalyticsWorkspaceName": {
        "type": "string",
        "defaultValue": "[format('la-{0}', uniqueString(resourceGroup().id))]"
      }
    },
    "functions": [],
    "variables": {
      "vmInsights": {
        "name": "[format('VMInsights({0})', parameters('logAnalyticsWorkspaceName'))]",
        "galleryName": "VMInsights"
      },
      "containerInsights": {
        "name": "[format('ContainerInsights({0})', parameters('logAnalyticsWorkspaceName'))]",
        "galleryName": "ContainerInsights"
      },
      "environmentName": "Production",
      "costCenterName": "IT"
    },
    "resources": [
      {
        "type": "Microsoft.OperationalInsights/workspaces",
        "apiVersion": "2020-03-01-preview",
        "name": "[format('la-{0}', uniqueString(resourceGroup().id))]",
        "location": "[resourceGroup().location]",
        "tags": {
          "Environment": "Production",
          "CostCenter": "IT"
        },
        "properties": {
          "retentionInDays": 30,
          "features": {
            "searchVersion": 1
          },
          "sku": {
            "name": "PerGB2018"
          }
        }
      },
      {
        "type": "Microsoft.Insights/diagnosticSettings",
        "apiVersion": "2017-05-01-preview",
        "scope": "[format('Microsoft.OperationalInsights/workspaces/{0}', parameters('logAnalyticsWorkspaceName'))]",
        "name": "diagnosticSettings",
        "properties": {
          "workspaceId": "Microsoft.OperationalInsights/workspaces/[format('la-{0}', uniqueString(resourceGroup().id))]",
          "logs": [
            {
              "category": "Audit",
              "enabled": true,
              "retentionPolicy": {
                "days": 7,
                "enabled": true
              }
            }
          ],
          "metrics": [
            {
              "category": "AllMetrics",
              "enabled": true,
              "retentionPolicy": {
                "days": 7,
                "enabled": true
              }
            }
          ]
        },
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces/[format('la-{0}', uniqueString(resourceGroup().id))]"
        ]
      },
      {
        "type": "Microsoft.OperationsManagement/solutions",
        "apiVersion": "2015-11-01-preview",
        "name": "(vmInsights).name",
        "location": "[resourceGroup().location]",
        "properties": {
          "workspaceResourceId": "Microsoft.OperationalInsights/workspaces/[format('la-{0}', uniqueString(resourceGroup().id))]"
        },
        "plan": {
          "name": "(vmInsights).name",
          "publisher": "Microsoft",
          "product": "[format('OMSGallery/{0}', variables('vmInsights').galleryName)]",
          "promotionCode": ""
        },
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces/[format('la-{0}', uniqueString(resourceGroup().id))]"
        ]
      },
      {
        "type": "Microsoft.OperationsManagement/solutions",
        "apiVersion": "2015-11-01-preview",
        "name": "(containerInsights).name",
        "location": "[resourceGroup().location]",
        "properties": {
          "workspaceResourceId": "Microsoft.OperationalInsights/workspaces/[format('la-{0}', uniqueString(resourceGroup().id))]"
        },
        "plan": {
          "name": "(containerInsights).name",
          "publisher": "Microsoft",
          "product": "[format('OMSGallery/{0}', variables('containerInsights').galleryName)]",
          "promotionCode": ""
        },
        "dependsOn": [
          "Microsoft.OperationalInsights/workspaces/[format('la-{0}', uniqueString(resourceGroup().id))]"
        ]
      }
    ],
    "\uff04schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#"
  }
}