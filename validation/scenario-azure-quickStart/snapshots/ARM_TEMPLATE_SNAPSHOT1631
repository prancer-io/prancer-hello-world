{
  "structure": "filesystem",
  "error": null,
  "reference": "master",
  "contentType": "json",
  "source": "gitConnectorAzureQuickStart",
  "paths": [
    "/quickstarts/microsoft.recoveryservices/recovery-services-daily-backup-policy-create/azuredeploy.json",
    "/quickstarts/microsoft.recoveryservices/recovery-services-daily-backup-policy-create/azuredeploy.parameters.json"
  ],
  "timestamp": 1642962909889,
  "queryuser": null,
  "checksum": "99914b932bd37a50b983c5e7c90ae93b",
  "node": {
    "masterSnapshotId": "ARM_TEMPLATE_SNAPSHOT",
    "type": "arm",
    "collection": "armtemplate",
    "paths": [
      "/quickstarts/microsoft.recoveryservices/recovery-services-daily-backup-policy-create/azuredeploy.json",
      "/quickstarts/microsoft.recoveryservices/recovery-services-daily-backup-policy-create/azuredeploy.parameters.json"
    ],
    "snapshotId": "ARM_TEMPLATE_SNAPSHOT1631",
    "status": "active",
    "validate": true,
    "resourceTypes": [
      "microsoft.recoveryservices/vaults",
      "microsoft.recoveryservices/vaults/backuppolicies"
    ]
  },
  "snapshotId": "ARM_TEMPLATE_SNAPSHOT1631",
  "collection": "armtemplate",
  "json": {
    "contentVersion": "1.0.0.0",
    "metadata": {
      "_generator": {
        "name": "bicep",
        "version": "0.4.1124.51302",
        "templateHash": "3874023297883573661"
      }
    },
    "parameters": {
      "vaultName": {
        "type": "string",
        "metadata": {
          "description": "Name of the Recovery Services Vault"
        },
        "value": "RSvault1"
      },
      "policyName": {
        "type": "string",
        "metadata": {
          "description": "Name of the Backup Policy"
        },
        "value": "DailyBackupPolicy1"
      },
      "scheduleRunTimes": {
        "type": "array",
        "metadata": {
          "description": "Times in day when backup should be triggered. e.g. 01:00 or 13:00. Must be an array, however for IaaS VMs only one value is valid. This will be used in LTR too for daily, weekly, monthly and yearly backup."
        },
        "value": [
          "2017-01-26T05:30:00Z"
        ]
      },
      "timeZone": {
        "type": "string",
        "metadata": {
          "description": "Any Valid timezone, for example:UTC, Pacific Standard Time. Refer: https://msdn.microsoft.com/en-us/library/gg154758.aspx"
        },
        "value": "UTC"
      },
      "instantRpRetentionRangeInDays": {
        "type": "int",
        "defaultValue": 2,
        "allowedValues": [
          1,
          2,
          3,
          4,
          5
        ],
        "metadata": {
          "description": "Number of days Instant Recovery Point should be retained"
        }
      },
      "dailyRetentionDurationCount": {
        "type": "int",
        "metadata": {
          "description": "Number of days you want to retain the backup"
        },
        "value": 104
      },
      "daysOfTheWeek": {
        "type": "array",
        "metadata": {
          "description": "Backup will run on array of Days like, Monday, Tuesday etc. Applies in Weekly retention only."
        },
        "value": [
          "Sunday",
          "Tuesday",
          "Thursday"
        ]
      },
      "weeklyRetentionDurationCount": {
        "type": "int",
        "metadata": {
          "description": "Number of weeks you want to retain the backup"
        },
        "value": 104
      },
      "monthlyRetentionDurationCount": {
        "type": "int",
        "metadata": {
          "description": "Number of months you want to retain the backup"
        },
        "value": 60
      },
      "monthsOfYear": {
        "type": "array",
        "metadata": {
          "description": "Array of Months for Yearly Retention"
        },
        "value": [
          "January",
          "March",
          "August"
        ]
      },
      "yearlyRetentionDurationCount": {
        "type": "int",
        "metadata": {
          "description": "Number of years you want to retain the backup"
        },
        "value": 10
      },
      "location": {
        "type": "string",
        "defaultValue": "[resourceGroup().location]",
        "metadata": {
          "description": "Location for all resources."
        }
      }
    },
    "resources": [
      {
        "type": "Microsoft.RecoveryServices/vaults",
        "apiVersion": "2020-10-01",
        "name": "RSvault1",
        "location": "[resourceGroup().location]",
        "sku": {
          "name": "RS0",
          "tier": "Standard"
        },
        "properties": {}
      },
      {
        "apiVersion": "2016-06-01",
        "name": "[format('{0}/{1}', parameters('vaultName'), parameters('policyName'))]",
        "type": "Microsoft.RecoveryServices/vaults/backupPolicies",
        "dependsOn": [
          "Microsoft.RecoveryServices/vaults/RSvault1"
        ],
        "location": "[resourceGroup().location]",
        "properties": {
          "backupManagementType": "AzureIaasVM",
          "instantRpRetentionRangeInDays": 2,
          "schedulePolicy": {
            "scheduleRunFrequency": "Daily",
            "scheduleRunTimes": [
              "2017-01-26T05:30:00Z"
            ],
            "schedulePolicyType": "SimpleSchedulePolicy"
          },
          "retentionPolicy": {
            "dailySchedule": {
              "retentionTimes": [
                "2017-01-26T05:30:00Z"
              ],
              "retentionDuration": {
                "count": 104,
                "durationType": "Days"
              }
            },
            "weeklySchedule": {
              "daysOfTheWeek": [
                "Sunday",
                "Tuesday",
                "Thursday"
              ],
              "retentionTimes": [
                "2017-01-26T05:30:00Z"
              ],
              "retentionDuration": {
                "count": 104,
                "durationType": "Weeks"
              }
            },
            "monthlySchedule": {
              "retentionScheduleFormatType": "Daily",
              "retentionScheduleDaily": {
                "daysOfTheMonth": [
                  {
                    "date": 1,
                    "isLast": false
                  }
                ]
              },
              "retentionTimes": [
                "2017-01-26T05:30:00Z"
              ],
              "retentionDuration": {
                "count": 60,
                "durationType": "Months"
              }
            },
            "yearlySchedule": {
              "retentionScheduleFormatType": "Daily",
              "monthsOfYear": [
                "January",
                "March",
                "August"
              ],
              "retentionScheduleDaily": {
                "daysOfTheMonth": [
                  {
                    "date": 1,
                    "isLast": false
                  }
                ]
              },
              "retentionTimes": [
                "2017-01-26T05:30:00Z"
              ],
              "retentionDuration": {
                "count": 10,
                "durationType": "Years"
              }
            },
            "retentionPolicyType": "LongTermRetentionPolicy"
          },
          "timeZone": "UTC"
        }
      }
    ],
    "\uff04schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#"
  }
}