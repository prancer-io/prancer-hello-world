{
  "structure": "filesystem",
  "error": null,
  "reference": "main",
  "contentType": "json",
  "source": "gitConnectorAzureTerraHashicorp",
  "paths": [
    "/examples/virtual-networks/azure-firewall/variables.tf",
    "/examples/virtual-networks/azure-firewall/main.tf"
  ],
  "timestamp": 1642943280173,
  "queryuser": null,
  "checksum": "99914b932bd37a50b983c5e7c90ae93b",
  "node": {
    "masterSnapshotId": "TRF_TEMPLATE_SNAPSHOT",
    "type": "terraform",
    "collection": "terraformtemplate",
    "paths": [
      "/examples/virtual-networks/azure-firewall/variables.tf",
      "/examples/virtual-networks/azure-firewall/main.tf"
    ],
    "snapshotId": "TRF_TEMPLATE_SNAPSHOT161",
    "status": "active",
    "validate": true,
    "resourceTypes": [
      "random_string",
      "azurerm_subnet",
      "azurerm_virtual_network",
      "azurerm_resource_group",
      "azurerm_storage_account",
      "azurerm_network_interface",
      "azurerm_virtual_machine",
      "azurerm_route_table",
      "azurerm_public_ip",
      "azurerm_subnet_route_table_association",
      "azurerm_network_security_group",
      "azurerm_network_interface_security_group_association",
      "azurerm_firewall_network_rule_collection",
      "azurerm_firewall",
      "azurerm_firewall_application_rule_collection"
    ]
  },
  "snapshotId": "TRF_TEMPLATE_SNAPSHOT161",
  "collection": "terraformtemplate",
  "json": {
    "provider": [
      {
        "azurerm": {
          "features": [
            {}
          ]
        }
      }
    ],
    "resources": [
      {
        "type": "azurerm_resource_group",
        "name": "azurg",
        "properties": {
          "name": "rgAzureFirewall",
          "location": "East US",
          "compiletime_identity": "azurerm_resource_group.azurg"
        }
      },
      {
        "type": "random_string",
        "name": "azustring",
        "properties": {
          "length": 16,
          "special": false,
          "upper": false,
          "number": false,
          "compiletime_identity": "random_string.azustring"
        }
      },
      {
        "type": "azurerm_storage_account",
        "name": "azusa",
        "properties": {
          "name": "${random_string.azustring.result}",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "account_tier": "Standard",
          "account_replication_type": "LRS",
          "tags": {
            "environment": "Staging",
            "owner": "Someone@contoso.com",
            "costcenter": "IT"
          },
          "compiletime_identity": "azurerm_storage_account.azusa"
        }
      },
      {
        "type": "azurerm_route_table",
        "name": "azurt",
        "properties": {
          "name": "AzfwRouteTable",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "disable_bgp_route_propagation": false,
          "route": [
            {
              "name": "AzfwDefaultRoute",
              "address_prefix": "0.0.0.0/0",
              "next_hop_type": "VirtualAppliance",
              "next_hop_in_ip_address": "10.0.1.4"
            }
          ],
          "tags": {
            "environment": "Staging",
            "owner": "Someone@contoso.com",
            "costcenter": "IT"
          },
          "compiletime_identity": "azurerm_route_table.azurt"
        }
      },
      {
        "type": "azurerm_virtual_network",
        "name": "azuvnet",
        "properties": {
          "name": "virtualNetwork1",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "address_space": [
            "10.0.0.0/16"
          ],
          "dns_servers": [
            "168.63.129.16",
            "8.8.8.8"
          ],
          "tags": {
            "environment": "Staging",
            "owner": "Someone@contoso.com",
            "costcenter": "IT"
          },
          "compiletime_identity": "azurerm_virtual_network.azuvnet"
        }
      },
      {
        "type": "azurerm_subnet",
        "name": "azusubnetjb",
        "properties": {
          "name": "JumpboxSubnet",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "virtual_network_name": "${azurerm_virtual_network.azuvnet.name}",
          "address_prefixes": [
            "10.0.0.0/24"
          ],
          "compiletime_identity": "azurerm_subnet.azusubnetjb"
        }
      },
      {
        "type": "azurerm_subnet",
        "name": "azusubnetfw",
        "properties": {
          "name": "AzureFirewallSubnet",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "virtual_network_name": "${azurerm_virtual_network.azuvnet.name}",
          "address_prefixes": [
            "10.0.1.0/24"
          ],
          "compiletime_identity": "azurerm_subnet.azusubnetfw"
        }
      },
      {
        "type": "azurerm_subnet",
        "name": "azusubnet",
        "properties": {
          "name": "ServersSubnet",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "virtual_network_name": "${azurerm_virtual_network.azuvnet.name}",
          "address_prefixes": [
            "10.0.2.0/24"
          ],
          "compiletime_identity": "azurerm_subnet.azusubnet"
        }
      },
      {
        "type": "azurerm_subnet_route_table_association",
        "name": "azurtassoc",
        "properties": {
          "subnet_id": "${azurerm_subnet.azusubnet.id}",
          "route_table_id": "${azurerm_route_table.azurt.id}",
          "compiletime_identity": "azurerm_subnet_route_table_association.azurtassoc"
        }
      },
      {
        "type": "azurerm_public_ip",
        "name": "azufwpip",
        "properties": {
          "name": "azureFirewalls-ip",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "allocation_method": "Static",
          "sku": "Standard",
          "tags": {
            "environment": "Staging",
            "owner": "Someone@contoso.com",
            "costcenter": "IT"
          },
          "compiletime_identity": "azurerm_public_ip.azufwpip"
        }
      },
      {
        "type": "azurerm_public_ip",
        "name": "azujumppip",
        "properties": {
          "name": "jumpBox-ip",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "allocation_method": "Dynamic",
          "sku": "Basic",
          "tags": {
            "environment": "Staging",
            "owner": "Someone@contoso.com",
            "costcenter": "IT"
          },
          "compiletime_identity": "azurerm_public_ip.azujumppip"
        }
      },
      {
        "type": "azurerm_network_security_group",
        "name": "azunsgjb",
        "properties": {
          "name": "JumpHostNSG",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "security_rule": [
            {
              "name": "RDP",
              "priority": 1000,
              "direction": "Inbound",
              "access": "Allow",
              "protocol": "Tcp",
              "source_port_range": "*",
              "destination_port_range": "*",
              "source_address_prefix": "*",
              "destination_address_prefix": "*"
            }
          ],
          "tags": {
            "environment": "Staging",
            "owner": "Someone@contoso.com",
            "costcenter": "IT"
          },
          "compiletime_identity": "azurerm_network_security_group.azunsgjb"
        }
      },
      {
        "type": "azurerm_network_interface",
        "name": "azunicjb",
        "properties": {
          "name": "JumpHostNIC",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "ip_configuration": [
            {
              "name": "ipconfig1",
              "subnet_id": "${azurerm_subnet.azusubnetjb.id}",
              "private_ip_address_allocation": "Dynamic",
              "public_ip_address_id": "${azurerm_public_ip.azujumppip.id}"
            }
          ],
          "tags": {
            "environment": "Staging",
            "owner": "Someone@contoso.com",
            "costcenter": "IT"
          },
          "compiletime_identity": "azurerm_network_interface.azunicjb"
        }
      },
      {
        "type": "azurerm_network_interface",
        "name": "azunicvm",
        "properties": {
          "name": "ServerNIC",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "ip_configuration": [
            {
              "name": "ipconfig1",
              "subnet_id": "${azurerm_subnet.azusubnet.id}",
              "private_ip_address_allocation": "Dynamic"
            }
          ],
          "tags": {
            "environment": "Staging",
            "owner": "Someone@contoso.com",
            "costcenter": "IT"
          },
          "compiletime_identity": "azurerm_network_interface.azunicvm"
        }
      },
      {
        "type": "azurerm_network_interface_security_group_association",
        "name": "azunicjb",
        "properties": {
          "network_interface_id": "${azurerm_network_interface.azunicjb.id}",
          "network_security_group_id": "${azurerm_network_security_group.azunsgjb.id}",
          "compiletime_identity": "azurerm_network_interface_security_group_association.azunicjb"
        }
      },
      {
        "type": "azurerm_virtual_machine",
        "name": "vmjb",
        "properties": {
          "name": "JumpBox",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "network_interface_ids": [
            "${azurerm_network_interface.azunicjb.id}"
          ],
          "vm_size": "Standard_DS1_v2",
          "storage_image_reference": [
            {
              "publisher": "MicrosoftWindowsServer",
              "offer": "WindowsServer",
              "sku": "2012-R2-Datacenter",
              "version": "latest"
            }
          ],
          "storage_os_disk": [
            {
              "name": "JumpBox-OSDisk",
              "caching": "ReadWrite",
              "create_option": "FromImage",
              "managed_disk_type": "Standard_LRS"
            }
          ],
          "os_profile": [
            {
              "computer_name": "JumpBox",
              "admin_username": "${var.adminUsername}",
              "admin_password": "${var.adminPassword}"
            }
          ],
          "os_profile_windows_config": [
            {}
          ],
          "boot_diagnostics": [
            {
              "enabled": true,
              "storage_uri": "${azurerm_storage_account.azusa.primary_blob_endpoint}"
            }
          ],
          "tags": {
            "environment": "Staging",
            "owner": "Someone@contoso.com",
            "costcenter": "IT"
          },
          "depends_on": [
            "${azurerm_network_interface_security_group_association.azunicjb}"
          ],
          "compiletime_identity": "azurerm_virtual_machine.vmjb"
        }
      },
      {
        "type": "azurerm_virtual_machine",
        "name": "vmserver",
        "properties": {
          "name": "Server",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "network_interface_ids": [
            "${azurerm_network_interface.azunicvm.id}"
          ],
          "vm_size": "Standard_DS1_v2",
          "storage_image_reference": [
            {
              "publisher": "MicrosoftWindowsServer",
              "offer": "WindowsServer",
              "sku": "2012-R2-Datacenter",
              "version": "latest"
            }
          ],
          "storage_os_disk": [
            {
              "name": "Server-OSDisk",
              "caching": "ReadWrite",
              "create_option": "FromImage",
              "managed_disk_type": "Standard_LRS"
            }
          ],
          "os_profile": [
            {
              "computer_name": "Server",
              "admin_username": "${var.adminUsername}",
              "admin_password": "${var.adminPassword}"
            }
          ],
          "os_profile_windows_config": [
            {}
          ],
          "boot_diagnostics": [
            {
              "enabled": true,
              "storage_uri": "${azurerm_storage_account.azusa.primary_blob_endpoint}"
            }
          ],
          "tags": {
            "environment": "Staging",
            "owner": "Someone@contoso.com",
            "costcenter": "IT"
          },
          "compiletime_identity": "azurerm_virtual_machine.vmserver"
        }
      },
      {
        "type": "azurerm_firewall",
        "name": "azufw",
        "properties": {
          "name": "firewall1",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "location": "${azurerm_resource_group.azurg.location}",
          "ip_configuration": [
            {
              "name": "configuration",
              "subnet_id": "${azurerm_subnet.azusubnetfw.id}",
              "public_ip_address_id": "${azurerm_public_ip.azufwpip.id}"
            }
          ],
          "compiletime_identity": "azurerm_firewall.azufw"
        }
      },
      {
        "type": "azurerm_firewall_application_rule_collection",
        "name": "azufwappr1",
        "properties": {
          "name": "appRc1",
          "azure_firewall_name": "${azurerm_firewall.azufw.name}",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "priority": 101,
          "action": "Allow",
          "rule": [
            {
              "name": "appRule1",
              "source_addresses": [
                "10.0.0.0/24"
              ],
              "target_fqdns": [
                "www.microsoft.com"
              ],
              "protocol": [
                {
                  "port": 80,
                  "type": "Http"
                }
              ]
            }
          ],
          "compiletime_identity": "azurerm_firewall_application_rule_collection.azufwappr1"
        }
      },
      {
        "type": "azurerm_firewall_network_rule_collection",
        "name": "azufwnetr1",
        "properties": {
          "name": "testcollection",
          "azure_firewall_name": "${azurerm_firewall.azufw.name}",
          "resource_group_name": "${azurerm_resource_group.azurg.name}",
          "priority": 200,
          "action": "Allow",
          "rule": [
            {
              "name": "netRc1",
              "source_addresses": [
                "10.0.0.0/24"
              ],
              "destination_ports": [
                "8000-8999"
              ],
              "destination_addresses": [
                "*"
              ],
              "protocols": [
                "TCP"
              ]
            }
          ],
          "compiletime_identity": "azurerm_firewall_network_rule_collection.azufwnetr1"
        }
      }
    ]
  }
}